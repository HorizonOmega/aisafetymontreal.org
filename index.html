<!DOCTYPE html>
<html lang="en" id="html-root">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>AI Safety Montréal — Research, Policy & Community Hub</title>
    <meta name="description"
        content="Montréal's AI safety ecosystem: 20+ organizations, weekly events, opportunities in research and policy." />

    <meta property="og:title" content="AI Safety Montréal — Research, Policy & Community Hub" />
    <meta property="og:description"
        content="Montréal's AI safety ecosystem: 20+ organizations, weekly events, opportunities in research and policy." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://aisafetymontreal.org" />
    <meta property="og:locale" content="en_CA" />
    <meta property="og:locale:alternate" content="fr_CA" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            color-scheme: dark;
            --font-sans: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            --fg: #ffffff;
            --fg-muted: #a1a1aa;
            --fg-soft: #71717a;
            --fg-dim: #52525b;
            --bg: #0a0a0b;
            --bg-subtle: #111113;
            --bg-surface: #18181b;
            --bg-elevated: #27272a;
            --bg-header: rgba(10, 10, 11, 0.8);
            --bg-nav-mobile: rgba(24, 24, 27, 0.98);
            --border: #27272a;
            --border-subtle: #1a1a1c;
            --border-hover: #3f3f46;
            --brand: #6366f1;
            --brand-hover: #818cf8;
            --brand-muted: #4f46e5;
            --brand-subtle: rgba(99, 102, 241, 0.1);
            --brand-soft: rgba(99, 102, 241, 0.15);
            --accent: #6366f1;
            --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-sm: 0 2px 8px 0 rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 16px 0 rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 8px 24px 0 rgba(0, 0, 0, 0.6);
            --shadow-brand: 0 0 0 1px rgba(99, 102, 241, 0.2), 0 2px 12px rgba(99, 102, 241, 0.15);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
            --radius-xl: 20px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        html,
        body {
            height: 100%;
        }

        body {
            min-height: 100%;
            background: var(--bg);
            color: var(--fg);
            font-family: var(--font-sans);
            font-size: 1rem;
            line-height: 1.7;
            display: flex;
            flex-direction: column;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-feature-settings: "cv02", "cv03", "cv04", "cv11";
        }

        main {
            flex: 1 0 auto;
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        a:hover {
            text-decoration: none;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .container {
            width: min(100%, 900px);
            margin: 0 auto;
            padding: 0 clamp(1rem, 4vw, 1.5rem);
        }

        .container-wide {
            width: min(100%, 1000px);
            margin: 0 auto;
            padding: 0 clamp(1rem, 4vw, 1.5rem);
        }

        h1,
        h2,
        h3 {
            font-weight: 600;
            letter-spacing: -0.025em;
            color: var(--fg);
        }

        h1 {
            font-size: clamp(2rem, 4.5vw, 2.75rem);
            line-height: 1.15;
            font-weight: 700;
            letter-spacing: -0.03em;
        }

        h2 {
            font-size: clamp(1.5rem, 3.5vw, 2rem);
            line-height: 1.25;
            font-weight: 700;
            letter-spacing: -0.025em;
        }

        h3 {
            font-size: 1.125rem;
            line-height: 1.4;
            font-weight: 600;
        }

        p {
            color: var(--fg-muted);
            max-width: 70ch;
            line-height: 1.7;
        }

        .site-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: saturate(180%) blur(20px);
            background: var(--bg-header);
            border-bottom: 1px solid var(--border-subtle);
        }

        .site-header .container {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }

        .header-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: clamp(1rem, 3vw, 2rem);
        }

        .brand {
            font-weight: 700;
            font-size: 1.125rem;
            letter-spacing: -0.02em;
            color: var(--fg);
            transition: color 0.2s ease;
        }

        .brand:hover {
            color: var(--brand-hover);
        }

        .brand span {
            display: inline-block;
        }

        .main-nav {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--fg-soft);
            transition: all 0.2s ease;
        }

        .nav-link:hover,
        .nav-link:focus-visible {
            color: var(--fg);
            background: var(--bg-surface);
        }

        .nav-link.active {
            color: var(--fg);
            background: var(--brand-subtle);
            font-weight: 600;
        }

        .lang-toggle {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
            background: var(--bg-subtle);
        }

        .lang-btn {
            background: transparent;
            border: none;
            padding: 0.375rem 0.75rem;
            border-radius: calc(var(--radius-md) - 2px);
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--fg-dim);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .lang-btn:hover:not([aria-pressed="true"]) {
            background: var(--bg-surface);
            color: var(--fg-muted);
        }

        .lang-btn[aria-pressed="true"] {
            background: var(--brand);
            color: white;
            box-shadow: var(--shadow-xs);
        }

        .menu-toggle {
            display: none;
            background: var(--bg-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 0.5rem;
            cursor: pointer;
            color: var(--fg);
            transition: all 0.2s ease;
        }

        .menu-toggle:hover,
        .menu-toggle:focus-visible {
            border-color: var(--border-hover);
            background: var(--bg-elevated);
        }

        section {
            padding: clamp(2rem, 4vw, 2.5rem) 0;
        }

        .hero {
            background: var(--bg);
            padding: clamp(2rem, 4vw, 2.5rem) 0 clamp(1.75rem, 4vw, 2.25rem);
            text-align: center;
            border-bottom: 1px solid var(--border-subtle);
        }

        .hero-content {
            max-width: 640px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            align-items: center;
        }

        .hero h1 {
            margin-bottom: 0;
        }

        .hero-subtitle {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--fg-muted);
            font-weight: 400;
        }

        .hero-meta {
            font-size: 0.875rem;
            color: var(--fg-soft);
            font-weight: 500;
            margin-top: 0;
        }

        #events .section-header {
            text-align: center;
            margin-bottom: 1.25rem;
        }

        .section-subtitle {
            font-size: 0.9375rem;
            color: var(--fg-muted);
            line-height: 1.6;
            margin: 0.5rem auto 0;
            max-width: 65ch;
        }

        .calendar-embed {
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--border);
            background: var(--bg-surface);
            margin-bottom: 0.875rem;
        }

        .calendar-embed iframe {
            display: block;
            border: none;
            width: 100%;
            height: 500px;
            background: transparent;
        }

        .calendar-actions {
            display: flex;
            justify-content: center;
            gap: 0.625rem;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            border-radius: var(--radius-md);
            padding: 0.5rem 1.125rem;
            font-weight: 500;
            font-size: 0.9375rem;
            text-decoration: none;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--brand);
            color: white;
            box-shadow: var(--shadow-xs);
        }

        .btn-primary:hover,
        .btn-primary:focus-visible {
            background: var(--brand-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary {
            background: var(--bg-surface);
            color: var(--fg);
            border-color: var(--border);
        }

        .btn-secondary:hover,
        .btn-secondary:focus-visible {
            background: var(--bg-elevated);
            border-color: var(--border-hover);
        }

        #directory {
            background: var(--bg);
        }

        #directory .section-header {
            max-width: 100%;
            margin-bottom: 1.125rem;
            text-align: center;
        }

        .directory-filter {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1.25rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .filter-btn {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            padding: 0.4rem 0.875rem;
            border-radius: var(--radius-md);
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--fg-soft);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .filter-btn:hover {
            background: var(--bg-elevated);
            color: var(--fg);
            border-color: var(--border-hover);
        }

        .filter-btn.active {
            background: var(--brand);
            color: white;
            border-color: var(--brand);
            font-weight: 600;
        }

        .directory-count {
            width: 100%;
            text-align: center;
            font-size: 0.8125rem;
            color: var(--fg-dim);
            margin-top: 0.375rem;
        }

        .directory-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .directory-card {
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 0.875rem 1rem;
            background: var(--bg-surface);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            transition: all 0.2s ease;
        }

        .directory-card:hover {
            border-color: var(--border-hover);
            background: var(--bg-elevated);
            box-shadow: var(--shadow-sm);
        }

        .entry-topline {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 0.625rem;
            flex-wrap: wrap;
        }

        .entry-name {
            font-weight: 600;
            font-size: 0.9375rem;
            color: var(--fg);
            line-height: 1.4;
        }

        .entry-meta {
            font-size: 0.8125rem;
            color: var(--fg-dim);
            font-weight: 500;
        }

        .entry-tags {
            display: inline-flex;
            flex-wrap: wrap;
            gap: 0.375rem;
        }

        .entry-tags:empty {
            display: none;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            padding: 0.1875rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.6875rem;
            font-weight: 600;
            letter-spacing: 0.03em;
            text-transform: uppercase;
            border: 1px solid transparent;
        }

        .tag-technical {
            background: rgba(99, 102, 241, 0.15);
            color: #a5b4fc;
            border-color: rgba(99, 102, 241, 0.2);
        }

        .tag-policy {
            background: rgba(168, 85, 247, 0.15);
            color: #c084fc;
            border-color: rgba(168, 85, 247, 0.2);
        }

        .tag-community {
            background: rgba(6, 182, 212, 0.15);
            color: #67e8f9;
            border-color: rgba(6, 182, 212, 0.2);
        }

        .tag-academic {
            background: rgba(251, 146, 60, 0.15);
            color: #fdba74;
            border-color: rgba(251, 146, 60, 0.2);
        }

        .entry-desc {
            font-size: 0.9375rem;
            color: var(--fg-muted);
            line-height: 1.6;
        }

        .entry-focus {
            font-size: 0.875rem;
            color: var(--fg-soft);
            font-style: normal;
            line-height: 1.5;
        }

        .entry-links {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .entry-links a {
            color: var(--brand-hover);
            transition: color 0.2s ease;
        }

        .entry-links a:hover,
        .entry-links a:focus-visible {
            color: var(--brand);
            text-decoration: underline;
        }

        footer {
            margin-top: auto;
            padding: 1.75rem 0 2rem;
            border-top: 1px solid var(--border-subtle);
            color: var(--fg-soft);
            font-size: 0.8125rem;
            background: var(--bg);
        }

        footer .footer-content {
            text-align: center;
        }

        footer p {
            margin-bottom: 0;
            line-height: 1.6;
            max-width: none;
        }

        footer a {
            color: var(--brand-hover);
            font-weight: 500;
            transition: color 0.2s ease;
        }

        footer a:hover,
        footer a:focus-visible {
            color: var(--brand);
            text-decoration: underline;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 1.25rem;
            margin-top: 0.75rem;
            flex-wrap: wrap;
        }

        .lang-fr {
            display: none !important;
        }

        .lang-en {
            display: inline !important;
        }

        body.french .lang-fr {
            display: inline !important;
        }

        body.french .lang-en {
            display: none !important;
        }

        *:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        .skip-link {
            position: absolute;
            top: -100px;
            left: 1rem;
            z-index: 10000;
            padding: 0.625rem 1rem;
            background: var(--brand);
            color: white;
            border-radius: var(--radius-md);
            font-weight: 600;
            text-decoration: none;
            font-size: 0.9375rem;
        }

        .skip-link:focus {
            top: 1rem;
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: inline-flex;
            }

            .header-bar {
                align-items: flex-start;
            }

            .main-nav {
                position: absolute;
                top: calc(100% + 0.5rem);
                right: clamp(1rem, 4vw, 1.5rem);
                left: clamp(1rem, 4vw, 1.5rem);
                flex-direction: column;
                align-items: stretch;
                background: var(--bg-nav-mobile);
                border: 1px solid var(--border);
                border-radius: var(--radius-lg);
                padding: 0.875rem;
                gap: 0.375rem;
                box-shadow: var(--shadow-md);
                display: none;
            }

            .main-nav.open {
                display: flex;
            }

            .nav-link,
            .lang-toggle {
                width: 100%;
                justify-content: center;
            }

            .hero {
                padding: 1.5rem 0 1.25rem;
            }

            section {
                padding: clamp(1.75rem, 4vw, 2rem) 0;
            }

            .calendar-embed iframe {
                height: 450px;
            }

            .directory-card {
                padding: 0.75rem 0.875rem;
            }
        }

        @media (max-width: 640px) {
            h1 {
                font-size: clamp(1.875rem, 7vw, 2.25rem);
            }

            h2 {
                font-size: clamp(1.5rem, 6vw, 1.875rem);
            }

            .hero-subtitle {
                font-size: 0.9375rem;
            }

            .calendar-embed iframe {
                height: 400px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            html {
                scroll-behavior: auto;
            }

            *,
            *::before,
            *::after {
                animation-duration: 0s !important;
                transition-duration: 0s !important;
            }
        }
    </style>
</head>

<body>
    <a href="#main-content" class="skip-link">
        <span class="lang-en">Skip to main content</span>
        <span class="lang-fr">Aller au contenu principal</span>
    </a>
    <header class="site-header" aria-label="Main">
        <div class="container">
            <div class="header-bar">
                <div class="brand">
                    <span class="lang-en">AI Safety Montréal</span>
                    <span class="lang-fr">Sécurité de l'IA Montréal</span>
                </div>
                <button class="menu-toggle" id="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12h18M3 6h18M3 18h18"/>
                    </svg>
                </button>
                <nav class="main-nav" id="main-nav" aria-label="Primary">
                    <a class="nav-link" href="#events"><span class="lang-en">Events</span><span class="lang-fr">Événements</span></a>
                    <a class="nav-link" href="#directory"><span class="lang-en">Organizations</span><span class="lang-fr">Organisations</span></a>
                    <div class="lang-toggle">
                        <button class="lang-btn" id="btn-fr" type="button" aria-pressed="false" aria-label="Français">FR</button>
                        <button class="lang-btn" id="btn-en" type="button" aria-pressed="true" aria-label="English">EN</button>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <main id="main-content">
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <p class="hero-subtitle">
                        <span class="lang-en">Events and organizations in Montréal's AI safety ecosystem</span>
                        <span class="lang-fr">Événements et organisations dans l'écosystème de sécurité de l'IA à Montréal</span>
                    </p>
                </div>
            </div>
        </section>

        <section id="events" aria-labelledby="events-heading">
            <div class="container">
                <div class="section-header">
                    <h2 id="events-heading">
                        <span class="lang-en">Events</span>
                        <span class="lang-fr">Événements</span>
                    </h2>
                </div>

                <div class="calendar-embed">
                    <iframe src="https://luma.com/embed/calendar/cal-6mC5Rknn9qtVgom/events" 
                            width="100%" 
                            height="600" 
                            allowfullscreen
                            aria-hidden="false"
                            tabindex="0"></iframe>
                </div>
            </div>
        </section>

        <section id="directory" aria-labelledby="directory-heading">
            <div class="container">
                <div class="section-header">
                    <h2 id="directory-heading">
                        <span class="lang-en">Organizations</span>
                        <span class="lang-fr">Organisations</span>
                    </h2>
                </div>

                <div class="directory-filter">
                    <button class="filter-btn active" data-filter="all">
                        <span class="lang-en">All</span>
                        <span class="lang-fr">Tout</span>
                    </button>
                    <button class="filter-btn" data-filter="research">
                        <span class="lang-en">Research</span>
                        <span class="lang-fr">Recherche</span>
                    </button>
                    <button class="filter-btn" data-filter="policy">
                        <span class="lang-en">Policy</span>
                        <span class="lang-fr">Politique</span>
                    </button>
                    <button class="filter-btn" data-filter="community">
                        <span class="lang-en">Community</span>
                        <span class="lang-fr">Communauté</span>
                    </button>
                    <button class="filter-btn" data-filter="university">
                        <span class="lang-en">University</span>
                        <span class="lang-fr">Université</span>
                    </button>
                    <button class="filter-btn" data-filter="independent">
                        <span class="lang-en">Independent</span>
                        <span class="lang-fr">Indépendant</span>
                    </button>
                    <span class="directory-count" id="directory-count"></span>
                </div>

                <ul id="directory-list" class="directory-list"></ul>
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p>
                    <span class="lang-en">Community-maintained directory • Contact: </span>
                    <span class="lang-fr">Annuaire communautaire • Contact : </span>
                    <a href="mailto:team@horizonomega.org">team@horizonomega.org</a>
                </p>
                <p style="margin-top: 0.5rem;">
                    <span class="lang-en">Last updated: October 31, 2025</span>
                    <span class="lang-fr">Dernière mise à jour : 31 octobre 2025</span>
                </p>
                <div class="footer-links">
                    <a href="https://github.com/HorizonOmega/aisafetymontreal.org" target="_blank" rel="noopener noreferrer">
                        <span class="lang-en">GitHub</span>
                        <span class="lang-fr">GitHub</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const organizations = [
            { name: "Mila – Québec AI Institute", type: "research", tags: ["technical", "academic"], desc: "World's largest academic deep learning research center with 140+ affiliated professors. Technical alignment, interpretability, responsible AI development.", focus: "Deep learning research, technical alignment, interpretability, responsible AI", size: null, links: [{ text: "Website", url: "https://mila.quebec/en" }, { text: "Careers", url: "https://apply.workable.com/mila-2/" }] },
            { name: "Krueger AI Safety Lab (KASL)", type: "research", tags: ["technical", "academic"], desc: "Technical AI safety research group at Mila led by David Krueger. Research in misgeneralization, mechanistic interpretability, and reward specification.", focus: "Technical alignment, misgeneralization, scalable oversight, interpretability, goal misalignment", size: null, links: [{ text: "Website", url: "https://www.kasl.ai" }] },
            { name: "IVADO — R³AI / R10: AI Safety & Alignment", type: "research", tags: ["technical", "academic"], desc: "Multi-year research program on AI safety across axes: evaluating harmful behaviors, understanding AI decision-making, algorithmic approaches for safe AI.", focus: "AI evaluation, alignment, scalable oversight, evaluating and mitigating LLM biases", size: null, links: [{ text: "Website", url: "https://ivado.ca/en/regroupements/ai-safety-and-alignment/" }] },
            { name: "LawZero", type: "research", tags: ["technical"], desc: "Nonprofit AI safety research organization launched by Yoshua Bengio. Focuses on non-agentic 'Scientist AI' architecture as alternative to frontier lab approaches.", focus: "Safe-by-design systems, truth-seeking AI, non-agentic Scientist AI, safety architectures", size: null, links: [{ text: "Website", url: "https://lawzero.org/en" }] },
            { name: "AI Safety Reading Group (Mila)", type: "research", tags: ["technical", "community"], desc: "Student-led reading groups at Mila covering AI safety topics; schedules vary by term.", focus: null, size: null, links: [{ text: "Student Resources", url: "https://mila.quebec/en/prospective-students-postdocs/student-life-and-resources" }] },
            { name: "Canadian AI Safety Institute (CAISI)", type: "policy", tags: ["policy", "technical"], desc: "Federal government AI safety institute. Funds research through CIFAR and NRC programs, develops safety tools/guidance. Member of International Network of AI Safety Institutes.", focus: "AI safety research, risk assessment, tools/guidance development", size: null, links: [{ text: "Website", url: "https://cifar.ca/ai/caisi/" }] },
            { name: "Montréal AI Governance, Ethics & Safety Meetup", type: "community", tags: ["community"], desc: "Public meetup community hosting talks, workshops, discussions on AI governance, ethics and safety. Co-organized with Horizon Omega.", focus: null, size: null, links: [{ text: "Join", url: "https://luma.com/montreal-ai-safety-ethics-governance?k=c" }] },
            { name: "PauseAI Montréal", type: "community", tags: ["community"], desc: "Volunteer community advocating to mitigate AI risks and pause development of superhuman AI until safe.", focus: "AI risk awareness, policy advocacy for pausing superhuman AI, public education", size: null, links: [{ text: "Website", url: "https://pauseai.ca/montreal.html" }] },
            { name: "AI Alignment McGill (AIAM)", type: "university", tags: ["community", "academic"], desc: "Student club at McGill focused on AI alignment and safety; organizes reading groups, hackathons and related activities.", focus: null, size: null, links: [{ text: "Alignment Forum", url: "https://www.alignmentforum.org/groups/TLbuSuKccZThdvDBo" }, { text: "Discord", url: "https://discord.gg/KvDpmxKDvw" }] },
            { name: "Horizon Omega (HΩ)", type: "independent", tags: ["community"], desc: "Montreal-based nonprofit hub supporting local AI safety, ethics and governance community through meetups, coworking, workshops and collaborations.", focus: "Ecosystem building, event coordination (GSAI, AISU), community resources, accelerating AI safety R&D", size: null, links: [{ text: "Website", url: "https://www.horizonomega.org/" }, { text: "Email", url: "mailto:team@horizonomega.org" }] },
            { name: "Montréal AI Ethics Institute (MAIEI)", type: "independent", tags: ["policy"], desc: "International non-profit founded 2018 that equips citizens concerned about AI and its societal impacts to take action. Produces AI Ethics Brief and State of AI Ethics reports.", focus: "AI ethics research, educational resources, policy analysis, democratizing AI ethics literacy", size: null, links: [{ text: "Website", url: "https://montrealethics.ai/" }] },
            { name: "CEIMIA", type: "independent", tags: ["policy"], desc: "Independent organization managing Montreal hub of GPAI Network of Centres. Implements high-impact applied projects for responsible AI based on ethics and human rights.", focus: "International AI governance, inclusive policy development, multi-stakeholder coordination, manages GPAI Montreal hub", size: null, links: [{ text: "Website", url: "https://ceimia.org/en/" }] },
            { name: "OBVIA", type: "independent", tags: ["policy", "academic"], desc: "Inter-university observatory on societal impacts of AI. Network of researchers from Quebec institutions publishing research across 7 thematic hubs.", focus: "Societal impacts of AI, policy research, public engagement, interdisciplinary research", size: null, links: [{ text: "Website", url: "https://www.obvia.ca/" }] },
            { name: "CIFAR — AI & Society", type: "independent", tags: ["policy", "academic"], desc: "Program under Pan-Canadian AI Strategy that convenes interdisciplinary meetings and publishes reports on AI's societal impacts for policymakers and public.", focus: "AI societal impacts, governance frameworks, interdisciplinary research, responsible AI deployment", size: null, links: [{ text: "Website", url: "https://cifar.ca/ai/ai-and-society/" }] }
        ];

        const tagLabels = {
            technical: "Technical",
            academic: "Research",
            policy: "Policy",
            community: "Community"
        };

        const esc = s => s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]));
        const external = url => url.startsWith('http') ? ' target="_blank" rel="noopener noreferrer"' : '';

        const renderDirectory = () => {
            const list = document.getElementById('directory-list');
            list.innerHTML = organizations.map(org => {
                const typeLabels = { research: 'Research', policy: 'Policy', community: 'Community', university: 'University', independent: 'Independent' };
                const typeLabel = typeLabels[org.type] || org.type;
                const metaParts = [typeLabel];
                if (org.size) metaParts.push(org.size);
                const metaLine = metaParts.join(' · ');
                
                return `
                <li data-type="${org.type}">
                    <div class="directory-card">
                        <div class="entry-topline">
                            <span class="entry-name">${esc(org.name)}</span>
                            <span class="entry-tags">${org.tags.map(t => `<span class="tag tag-${t}">${tagLabels[t] || t}</span>`).join('')}</span>
                        </div>
                        <div class="entry-meta">${esc(metaLine)}</div>
                        <div class="entry-desc">${esc(org.desc)}</div>
                        ${org.focus ? `<div class="entry-focus">Focus: ${esc(org.focus)}</div>` : ''}
                        <div class="entry-links">${org.links.map(l => `<a href="${esc(l.url)}"${external(l.url)}>${esc(l.text)}</a>`).join(' · ')}</div>
                    </div>
                </li>
            `;
            }).join('');
            updateDirectoryCount();
        };

        const updateDirectoryCount = () => {
            const allItems = document.querySelectorAll('#directory-list li[data-type]');
            const visibleCount = Array.from(allItems).filter(item => item.style.display !== 'none').length;
            const totalCount = organizations.length;
            const countEl = document.getElementById('directory-count');
            if (countEl) {
                countEl.textContent = `${visibleCount} of ${totalCount}`;
            }
        };

        const setLanguage = lang => {
            const isFr = lang === 'fr';
            document.body.classList.toggle('french', isFr);
            document.getElementById('html-root').setAttribute('lang', isFr ? 'fr' : 'en');
            document.getElementById('btn-fr').setAttribute('aria-pressed', String(isFr));
            document.getElementById('btn-en').setAttribute('aria-pressed', String(!isFr));
            try {
                localStorage.setItem('language', lang);
                document.cookie = `lang=${lang}; path=/; max-age=31536000`;
            } catch (e) {}
        };

        // Scroll spy for active navigation
        const setupScrollSpy = () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link[href^="#"]');

            const observerOptions = {
                root: null,
                threshold: 0.3,
                rootMargin: '-20% 0px -70% 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => link.classList.remove('active'));
                        const id = entry.target.id;
                        const activeLink = document.querySelector(`.nav-link[href="#${id}"]`);
                        if (activeLink) activeLink.classList.add('active');
                    }
                });
            }, observerOptions);

            sections.forEach(section => observer.observe(section));
        };

        document.addEventListener('DOMContentLoaded', () => {
            renderDirectory();
            setupScrollSpy();

            const menuToggle = document.getElementById('menu-toggle');
            const mainNav = document.getElementById('main-nav');
            
            menuToggle?.addEventListener('click', () => {
                const isOpen = mainNav.classList.toggle('open');
                menuToggle.setAttribute('aria-expanded', String(isOpen));
            });

            mainNav?.addEventListener('click', e => {
                if (e.target.tagName === 'A') {
                    mainNav.classList.remove('open');
                    menuToggle?.setAttribute('aria-expanded', 'false');
                }
            });

            try { 
                setLanguage(localStorage.getItem('language') || 'en'); 
            } catch (e) { 
                setLanguage('en'); 
            }
            
            document.getElementById('btn-fr')?.addEventListener('click', () => setLanguage('fr'));
            document.getElementById('btn-en')?.addEventListener('click', () => setLanguage('en'));

            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const selectedType = e.currentTarget.dataset.filter;
                    
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    
                    document.querySelectorAll('#directory-list li[data-type]').forEach(item => {
                        item.style.display = selectedType === 'all' || item.dataset.type === selectedType ? '' : 'none';
                    });
                    
                    const visibleCount = Array.from(document.querySelectorAll('#directory-list li[data-type]'))
                        .filter(item => item.style.display !== 'none').length;
                    const countEl = document.getElementById('directory-count');
                    if (countEl) {
                        countEl.textContent = `${visibleCount} of ${organizations.length}`;
                    }
                });
            });
        });
    </script>
</body>

</html>
